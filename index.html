<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<!--  This file has been downloaded from bootdey.com @bootdey on twitter -->
	<!--  All snippets are MIT license http://bootdey.com/license -->
	<title>BeONE - 20/10</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.bundle.min.js"></script>

	<!-- Font -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Ephesis&display=swap" rel="stylesheet">

	<!-- Add File src -->
	<link rel="stylesheet" href="./src/css/falling.css">
</head>

<body>
	<main class="content">

		<div class="container p-0">

			<!-- Card -->
			<div class="card">
				<div class="app row g-0">
					<!-- List room -->
					<div class="col-12 col-lg-5 col-xl-3 border-right">

						<div class="px-4 d-none d-md-block">
							<div class="d-flex align-items-center">
								<div class="flex-grow-1">
									<input type="text" class="form-control my-3" placeholder="Search...">
								</div>
							</div>
						</div>

						<a href="#" class="list-group-item list-group-item-action border-0"
							style="padding: .91rem 1.25rem; background: transparent;">
							<div class="badge bg-success float-right">5</div>
							<div class="d-flex align-items-start">
								<img src="./assets/image/anhdaidien.jpg" class="rounded-circle mr-1"
									alt="Vanessa Tucker" width="40" height="40">
								<div class="flex-grow-1 ml-3">
									Boy BeONE
									<div class="small"><span class="fas fa-circle chat-online"></span> Online</div>
								</div>
							</div>
						</a>

						<hr class="d-block d-lg-none mt-1 mb-0">
					</div>
					<!-- End list room -->

					<!-- Room Chat -->
					<div class="col-12 col-lg-7 col-xl-9">
						<!-- Title Room Chat -->
						<div class="py-2 px-4 border-bottom d-none d-lg-block">
							<div class="d-flex align-items-center py-1">
								<!-- Title Room Chat -->
								<div class="position-relative">
									<img src="./assets/image/anhdaidien.jpg" class="rounded-circle mr-1" alt="Boy BeONE"
										width="40" height="40">
								</div>
								<div class="flex-grow-1 pl-3">
									<strong>Boy BeONE</strong>
									<div class="text-muted small"><em>La la la</em></div>
								</div>
								<!-- End Title Room chat -->

								<!-- Group Button Title Room Chat -->
								<div>
									<button class="btn btn-primary btn-lg mr-1 px-3 "><svg
											xmlns="http://www.w3.org/2000/svg" width="24" height="24"
											viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
											stroke-linecap="round" stroke-linejoin="round"
											class="feather feather-phone feather-lg">
											<path
												d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z">
											</path>
										</svg></button>
									<button class="btn btn-info btn-lg mr-1 px-3 d-none d-md-inline-block"><svg
											xmlns="http://www.w3.org/2000/svg" width="24" height="24"
											viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
											stroke-linecap="round" stroke-linejoin="round"
											class="feather feather-video feather-lg">
											<polygon points="23 7 16 12 23 17 23 7"></polygon>
											<rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
										</svg></button>
									<button class="btn btn-light border btn-lg px-3"><svg
											xmlns="http://www.w3.org/2000/svg" width="24" height="24"
											viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
											stroke-linecap="round" stroke-linejoin="round"
											class="feather feather-more-horizontal feather-lg">
											<circle cx="12" cy="12" r="1"></circle>
											<circle cx="19" cy="12" r="1"></circle>
											<circle cx="5" cy="12" r="1"></circle>
										</svg></button>
								</div>
								<!-- End Group Button Title Room Chat -->
							</div>
						</div>

						<!-- End Title Room Chat -->

						<!-- Message -->
						<div class="position-relative">
							<div class="chat-messages p-2" id="messageBody">

								<!-- Message Emoji link: https://www.ginifab.com/symbols/emoji_smiley_face.html -->
								<!-- <div class="chat-message-left pb-4" style="width: 76%; background: transparent;">
									<div>
										<img src="https://bootdey.com/img/Content/avatar/avatar3.png"
											class="rounded-circle mr-1" alt="Boy BeONE" width="40" height="40">
									</div>
									<div class="flex-shrink-1 rounded py-2 px-3 ml-3 chat-message-emojis">
										&#128514;üòÅ
									</div>
								</div> -->
								<!-- Image -->

								<!-- <div class="chat-message-left pb-4" style="width: 76%; background: transparent;">
									<div>
										<img src="https://bootdey.com/img/Content/avatar/avatar3.png"
											class="rounded-circle mr-1" alt="Boy BeONE" width="40" height="40">
									</div>
									<img src="assets/image/image2.jfif" alt="·∫¢nh hay ho"
										class="flex-shrink-1 py-2 px-3 ml-3 bg-light " style="border-radius: 10%" />

								</div>

								
								Text
								<div class="chat-message-right mb-4" style="width: 76%">
									<div>
										<img src="https://bootdey.com/img/Content/avatar/avatar1.png"
											class="rounded-circle mr-1" alt="Chris Wood" width="40" height="40">
									</div>
									<div class="flex-shrink-1 bg-light rounded py-2 px-3 mr-3">
										Lorem ipsum dolor sit amet, vis erat denique in, dicunt prodesset te vix.
									</div>
								</div> -->
								<!-- Key -->
								<!-- <div class="chat-message-left pb-2" style="width: 76%">
									<div>
										<img src="https://bootdey.com/img/Content/avatar/avatar1.png"
											class="rounded-circle mr-1" alt="Chris Wood" width="40" height="40">
									</div>
									<div class="flex-shrink-1 bg-light rounded py-2 px-3 ml-3">
										<div style="font-weight: bold; font-size: 1.4rem;">The Earth is Happy <br>
											WHEN WOMEN SMILE
										</div>
										<br>
										<div style="font-family: 'Ephesis', cursive; font-size: 1.5rem;"> Ph√°i n·ªØ m·ªôt
											n·ª≠a c·ªßa th·∫ø gi·ªõi lu√¥n quan tr·ªçng v·ªõi ph√°t nam. Ch√∫c cho nh·ªØng
											ƒëi·ªÅu may m·∫Øn, h·∫°nh ph√∫c s·∫Ω t·ªõi v·ªõi c·∫≠u!
										</div>
									</div>
								</div> -->



							</div>
						</div>
						<!-- End Message -->

						<!-- Send Room chat -->
						<div class="flex-grow-0 border-top ">
							<div class="input-group pt-2 d-flex flex-row-reverse" id="group-answer">

								<!-- <button class="answer btn btn-outline-info mb-2 mx-1" onclick="selectAnswer(0)">Lorem
									iet te
									vix.</button> -->

							</div>
						</div>
						<!-- End Send Room chat -->

					</div>
					<!-- End Room Chat -->
				</div>
				<audio id="audio">
					<source src="./assets/audio/audio.m4a">
				</audio>
			</div>
			<!-- End Card -->
		</div>
	</main>

	<style type="text/css">
		body {}

		body {}

		/*
		@keyframes gradient {
			0% {
				background-position: 0% 10%;
			}

			10% {
				background-position: 100% 10%;
			}

			100% {
				background-position: 0% 10%;
			}
		} */


		/* .content {
			background: #ee9ca7;
			background: -webkit-linear-gradient(to right, #ffdde1, #ee9ca7);
			background: linear-gradient(to right, #ffdde1, #ee9ca7);

		}  */

		.container {
			position: absolute;
			top: 0;
			left: 50%;
			transform: translate(-50%, 0);
		}


		.app,
		.card {
			background: transparent;
		}

		.chat-online {
			color: #34ce57
		}

		.chat-offline {
			color: #e4606d
		}

		.chat-messages {
			display: flex;
			flex-direction: column;
			max-height: calc(100vh - 76px);
			overflow-y: scroll;

		}

		.chat-message-left,
		.chat-message-right {
			display: flex;
			flex-shrink: 0;
		}


		.chat-message-left {
			margin-right: auto
		}

		.chat-message-right {
			flex-direction: row-reverse;
			margin-left: auto;

		}

		.py-3 {
			padding-top: 1rem !important;
			padding-bottom: 1rem !important;
		}

		.px-4 {
			padding-right: 1.5rem !important;
			padding-left: 1.5rem !important;
		}

		.flex-grow-0 {
			flex-grow: 0 !important;
		}

		.border-top {
			border-top: 1px solid #dee2e6 !important;
		}

		/* M·ªõi th√™m */
		.bg-message-blue {
			background: #0084ff !important;
			color: white;
		}

		.chat-message-emojis {
			font-size: 3rem;
		}
	</style>


	<!-- Falling -->
	<script src='https://cdnjs.cloudflare.com/ajax/libs/gsap/1.20.3/TweenMax.min.js'></script>
	<!-- add src -->
	<script src="./src/js/falling.js"></script>
	<script src="./src/data/quiz.js"></script>

	<script type="text/javascript">
		//url
		const urlAvatarRight = "./assets/image/anhdaidien.jpg";
		const urlAvatarLeft = "./assets/image/anhdaidien.jpg";

		scrollBottom();
		//setFallingContailer();
		//openAudio();

		/* T∆∞∆°ng t√°c tin nh·∫Øn
		========================================================================== */

		// C·ªù c√≥ b√°o ƒë√£ hi·ªán th·ªã ava hay ch∆∞a
		var openAfterAnswer = false;

		// Th·ª© t·ª± quiz hi·ªán t·∫°i
		var indexQuizs = 0;

		// ƒê·ªô tr·ªÖ khi ra c√¢u h·ªèi
		var durationDisplayAnswers = 0;

		runQuiz(indexQuizs);

		function runQuiz() {
			let quiz = quizs[indexQuizs];

			appendMessageRight(quizs[indexQuizs].messages);

			displayAnswer(quizs[indexQuizs].answers);

		}

		/** 
		* Khi l·ª•a ch·ªçn c√¢u tr·∫£ l·ªùi
		* @param {int} keyAnswer Th·ª© t·ª± c√¢u tr·∫£ l·ªùi ƒë∆∞·ª£c l·ª±a ch·ªçn  
		* @returns {}  void
		* Created By: LMCUONG(17/10/2021) 
		*/
		function selectAnswer(keyAnswer) {
			let quiz = quizs[indexQuizs];

			let messages = [];

			for (const key in quiz.afterAnswers) {
				if (Object.hasOwnProperty.call(quiz.afterAnswers, key)) {
					const element = quiz.afterAnswers[key];
					messages.push(element[keyAnswer]);
				}
			}

			// T·∫Øt c·ªù hi·ªÉn th·ªã ava 
			openAfterAnswer = false;

			appendMessageLeft(quiz.answers[keyAnswer]);

			//ƒê√≥ng c√°c c√¢u tr·∫£ l·ªùi
			$('#group-answer .answer').remove();


			appendMessageRight(messages);


			// Ti·∫øp t·ª•c c√¢u h·ªèi
			if (indexQuizs < quizs.length - 1) {
				indexQuizs++;

				runQuiz();
			}

		}

		/** 
		* Hi·ªÉn th·ªã c√°c tr·∫£ l·ªùi
		* @param {array} answers m·∫£ng c√°c c√¢u tr·∫£ l·ªùi  
		* @returns void
		* Created By: LMCUONG(17/10/2021) 
		*/
		function displayAnswer(answers) {
			for (const key in answers) {
				if (Object.hasOwnProperty.call(answers, key)) {
					const element = answers[key];

					stringDiv = '<button class="answer btn btn-outline-info mb-2 mx-1" onclick="selectAnswer(' + key + ')">' + element + '</button>';


					// T·∫°m ·∫©n th·∫ª sau ƒë√≥ m·ªõi hi·ªán th·∫ª
					var new_item = $(stringDiv).hide();
					$("#group-answer").append(new_item);

					// Hi·ªán th·∫ª v√† ƒë∆∞a m√†n h√¨nh xu·ªëng cu·ªëi
					new_item.delay(durationDisplayAnswers + 1000).slideDown();
					setTimeout(function () {
						scrollBottom();
					}, durationDisplayAnswers + 1000 + 100);
				}
			}

		}

		/** 
		* Xu·∫•t hi·ªán th√™m c√°c tin nh·∫Øn b√™n ph·∫£i
		* @param {array} messages M·∫£ng c√°c tin nh·∫Øn c·∫ßn hi·ªÉn th·ªã  
		* @returns void
		* Created By: LMCUONG(17/10/2021) 
		*/
		function appendMessageRight(messages) {
			let durationMessage = 0;

			const imgDiv = '<img src = "' + urlAvatarRight + '"class= "rounded-circle mr-1" alt = "Boy BeONE" width = "40" height = "40" > ';
			const imgDivNone = '<img src = "' + urlAvatarRight + '"class= "rounded-circle mr-1" style="opacity: 0" alt = "Boy BeONE" width = "40" height = "40" >';
			let tempImgDiv = '';

			for (let key = 0; key < messages.length; key++) {
				const element = messages[key];

				// G√°n th·∫ª image
				if (openAfterAnswer == false) {
					tempImgDiv = imgDiv;
					openAfterAnswer = true;
				}
				else {
					if (key == 0) {
						durationMessage = durationMessage + 1000;
					}
					tempImgDiv = imgDivNone;
				}

				durationMessage = durationMessage + element.duration;
				let stringDiv = "";
				// Type = text
				if (element.type == "text" || element.type == "question" || element.type == "keyend") {
					stringDiv = '<div class="chat-message-left pb-2" style="width: 76%">' +
						'<div>' + tempImgDiv +
						'</div >' +
						'<div class="flex-shrink-1 bg-light rounded py-2 px-3 ml-3">' +
						element.value +
						'</div></div > ';
				}

				// Type = image
				if (element.type == "image") {
					stringDiv =
						'<div class="chat-message-left pb-2" style="width: 76%; background: transparent;">' +
						'<div>' + tempImgDiv +
						'<img src="' + element.url + '" alt="' + element.alt + '" '
						+ 'class="flex-shrink-1 py-2 px-3 ml-3 bg-light" style="border-radius: 10%; height: 26vh" />' +
						'</div> '
				}
				// Type = emojis
				if (element.type == "emoji") {
					stringDiv =
						'<div class="chat-message-left pb-2" style="width: 76%; background: transparent;">' +
						'<div>' +
						tempImgDiv +
						'</div >' +
						'<div class="flex-shrink-1 rounded py-0 px-3 ml-3 chat-message-emojis">' +
						element.value +
						'</div></div > ';
				}
				// Type = keyend


				// T·∫°m ·∫©n th·∫ª sau ƒë√≥ m·ªõi hi·ªán th·∫ª
				var new_item = $(stringDiv).hide();
				$("#messageBody").append(new_item);

				// Hi·ªán th·∫ª v√† ƒë∆∞a m√†n h√¨nh xu·ªëng cu·ªëi
				new_item.delay(durationMessage).fadeToggle();
				setTimeout(function () {
					scrollBottom();
					if (element.type == "keyend") {
						setFallingContailer();
						openAudio();
						openBackgroundGradient();
					}
				}, durationMessage + 100);
	



			}
			durationDisplayAnswers = durationMessage;
		}

		/** 
		* Xu·∫•t hi·ªán th√™m tin nh·∫Øn b√™n tr√°i
		* @param {String}  T√™n nh·∫Øn mu·ªën hi·ªÉn th·ªã 
		* @returns {}  void
		* Created By: LMCUONG(17/10/2021) 
		*/
		function appendMessageLeft(message) {
			$("#messageBody").append(
				'<div class="chat-message-right pb-4" style="width: 76%">' +
				'<div>' +
				'<img src="' + urlAvatarLeft + '" class= "rounded-circle mr-1" ' +
				'alt = "Girl BeONE" width = "40" height = "40" >' +
				'</div >' +
				'<div class="flex-shrink-1 bg-light rounded py-2 px-3 mr-3 bg-message-blue">' +
				message +
				'</div></div > '

			);
			scrollBottom();
		}



		/* C√°c Hi·ªáu ·ª©ng
		========================================================================== */

		// Hi·ªÉu ·ª©ng chuy·ªÉn m√†u
		function openBackgroundGradient() {
			$("body").css({
				"background": 'linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab)',
				'background-size': '400% 400%',
				/* animation: gradient 15s ease infinite; */
				'height': '100vh'
			})
			$(".card").css({
				'border-color':"white"
			})
		}

		// M√†n h√¨nh t·ª± lƒÉn xu·ªëng cu·ªëi
		function scrollBottom() {
			let chatHistory = document.getElementById("messageBody");
			$("html, body").animate({ scrollTop: $(document).height() }, 1000);
			chatHistory.scrollTop = chatHistory.scrollHeight;
		}

		//B·∫≠t Audio
		function openAudio() {
			setTimeout(function () {
				document.getElementById("audio").play();
			}, 1500);


		}



		// B·∫∑t hi·ªáu ·ª©ng hoa r∆°i
		// L∆∞u √Ω hi·ªáu ·ª©ng n√†y ch·∫°y r·∫•t n·∫∑ng
		function setFallingContailer() {
			$(".content").append('<div id="container" style=" top: 0; left: 0; z-index: 10;"></div>');
			$("#container").css({ "width": screen.width + "px", "height": screen.height + "px" });
			TweenLite.set("#container", { perspective: 400 });
			//TweenLite.set("img",{xPercent:"-10%",yPercent:"-10%"})


			console.log(TweenLite);

			var total = 10;
			var container = document.getElementById("container"),
				w = window.innerWidth,
				h = window.innerHeight;

			for (i = 0; i < total; i++) {
				var Div = document.createElement("div");
				var Div2 = document.createElement("div");
				var Div3 = document.createElement("div");
				TweenLite.set(Div, {
					attr: { class: "dot" },
					x: R(0, w),
					y: R(-200, -150),
					z: R(-200, 200),
					xPercent: "-50%",
					yPercent: "-50%",
				});
				TweenLite.set(Div2, {
					attr: { class: "dot2" },
					x: R(0, w),
					y: R(-200, -150),
					z: R(-200, 200),
					xPercent: "-50%",
					yPercent: "-50%",
				});
				TweenLite.set(Div3, {
					attr: { class: "dot3" },
					x: R(0, w),
					y: R(-200, -150),
					z: R(-200, 200),
					xPercent: "-50%",
					yPercent: "-50%",
				});
				container.appendChild(Div);
				container.appendChild(Div2);
				container.appendChild(Div3);
				animm(Div);
				animm2(Div2);
				animm3(Div3);
			}
		}

	</script>

</body>

</html>